# ══════════════════════════════════════════════════════════════════════════════
# CHAINBRIDGE PYTEST CONFIGURATION
# PAC-ATLAS-RECOVERY-14 - DEEP LOGIC DISCOVERY
# ══════════════════════════════════════════════════════════════════════════════

[pytest]
# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test paths - FULL RECURSIVE DISCOVERY
# Includes: tests/, scripts/ (deep-logic tests)
testpaths = 
    tests
    scripts

# Ignore nested service tests and ALL virtual environments
# These contain dependency tests that should not be counted
norecursedirs = 
    .git
    .venv
    .venv*
    */.venv
    */.venv*
    __pycache__
    site-packages
    node_modules
    htmlcov
    build
    ChainBridge/.venv*
    ChainBridge/*/.venv*
    ChainBridge/chainpay-service/tests
    ChainBridge/chainiq-service
    ChainBridge/chainboard-service
    ChainBridge/chainfreight-service

# Output options with timeout enforcement
addopts = 
    -v
    --strict-markers
    --tb=short
    --timeout=5

# Register custom markers
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    governance: marks tests related to governance enforcement
    deep_logic: marks tests for deep logic verification
